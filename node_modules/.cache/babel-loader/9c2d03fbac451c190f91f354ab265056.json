{"ast":null,"code":"var _jsxFileName = \"/home/lilit/workspace/vtk/from_scratch_frontend_vtk/src/components/Location/LocationTable.js\",\n    _s = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { XGrid } from \"@material-ui/x-grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { GridToolbarContainer, GridDensitySelector, GridFilterToolbarButton, GridColumnsToolbarButton } from \"@material-ui/x-grid\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteForeverOutlinedIcon from \"@material-ui/icons/DeleteForeverOutlined\";\nimport EditOutlinedIcon from \"@material-ui/icons/EditOutlined\";\nimport russian from \"../../constants/localeTextConstants.js\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport LocationAddDialog from \"./LocationAddDialog\";\nimport LocationUpdateDialog from \"./LocationUpdateDialog\";\nimport WorningDialog from \"../WorningDialog\";\nimport Button from \"@material-ui/core/Button\";\nimport { useSnackbar } from \"notistack\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  toolbarContainer: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  tableContainer: {\n    display: \"flex\",\n    height: \"85vh\",\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    flexGrow: 1,\n    fontSize: \"18px\"\n  },\n  tools: {\n    width: \"100%\",\n    paddingLeft: 20,\n    paddingRight: 20,\n    marginBottom: 30,\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  iconButton: {\n    \"&:hover\": {\n      backgroundColor: \"#bdbdbd\"\n    }\n  },\n  root: {\n    \"& .MuiDataGrid-columnsContainer\": {\n      backgroundColor: \"#e8eaf6\",\n      border: \"#bdbdbd solid 1px\"\n    },\n    \"& .MuiDataGrid-colCellTitle\": {\n      fontWeight: \"bold\"\n    },\n    \"&.MuiDataGrid-row\": {\n      height: \"auto\",\n      wrapText: true\n    }\n  }\n});\nexport default function LocationTable({\n  locations,\n  deleteLocation,\n  addLocation,\n  updateLocation\n}) {\n  _s();\n\n  const [openAddDialog, setOpenAddDialog] = React.useState(false);\n  const [openUpdateDialog, setOpenUpdateDialog] = React.useState(false);\n  const [parameters, setParameters] = React.useState({});\n  const [openWorning, setOpenWorning] = React.useState(false);\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const classes = useStyles();\n\n  const handleAddDialogOpen = () => {\n    setOpenAddDialog(true);\n  };\n\n  const handleAddDialogClose = (event, number, name, note) => {\n    setOpenAddDialog(false);\n  };\n\n  const handleUpdateDialogClose = (event, number, name, note) => {\n    setOpenUpdateDialog(false);\n  };\n\n  const handleUpdateDialogOpen = params => {\n    setParameters(Object.assign({}, params.row));\n    setOpenUpdateDialog(true);\n  };\n\n  const handleCreate = (event, number, name, note, id) => {\n    if (!name) {\n      enqueueSnackbar(\"Нобходимо заполнить поле Название\", {\n        variant: \"warning\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    } else if (number && isNaN(Number(number))) {\n      enqueueSnackbar('В поле \"номер\" необходимо ввести число!', {\n        variant: \"warning\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    } else {\n      let location = {};\n      location.name = name;\n      if (!!number) location.number = number;\n      if (!!note) location.note = note;\n\n      try {\n        addLocation(location);\n        setOpenAddDialog(false);\n      } catch (err) {\n        console.log({\n          err\n        });\n      }\n    }\n  };\n\n  const handleUpdate = (event, number, name, note, id) => {\n    let location = {};\n    location.id = id;\n    if (!!name) location.name = name;\n    if (!!number) location.number = number;\n    if (!!note) location.note = note;\n    updateLocation(location);\n    setOpenUpdateDialog(false);\n  };\n\n  const handleDeleteWorningClose = action => {\n    setOpenWorning(false);\n    if (action === \"submit\") deleteLocation(parameters);\n  };\n\n  const handleDeleteWorningOpen = params => {\n    setOpenWorning(true);\n    setParameters(Object.assign({}, params.row));\n  };\n\n  const editColumn = {\n    field: \"edit\",\n    headerName: \"Редактировать\",\n    sortable: false,\n    flex: 0.15,\n    width: 135,\n    renderCell: params => /*#__PURE__*/_jsxDEV(IconButton, {\n      \"aria-label\": \"edit\",\n      color: \"primary\",\n      className: classes.iconButton,\n      onClick: () => {\n        handleUpdateDialogOpen(params);\n      },\n      children: /*#__PURE__*/_jsxDEV(EditOutlinedIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)\n  };\n  const deleteColumn = {\n    field: \"delete\",\n    headerName: \"Удалить\",\n    sortable: false,\n    flex: 0.15,\n    renderCell: params => /*#__PURE__*/_jsxDEV(IconButton, {\n      \"aria-label\": \"delete\",\n      color: \"secondary\",\n      className: classes.iconButton,\n      onClick: () => handleDeleteWorningOpen(params),\n      children: /*#__PURE__*/_jsxDEV(DeleteForeverOutlinedIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this)\n  };\n\n  if (locations.columns && locations.columns.length > 0) {\n    locations.columns.push(editColumn);\n    locations.columns.push(deleteColumn);\n  }\n\n  const columns = locations.columns ? locations.columns : [];\n  const rows = locations.rows ? locations.rows : [];\n\n  function CustomToolbar() {\n    return /*#__PURE__*/_jsxDEV(GridToolbarContainer, {\n      className: classes.toolbarContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          children: \"\\u041C\\u0435\\u0441\\u0442\\u0430 \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0441\\u0442\\u0432\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.tools,\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            className: classes.add,\n            onClick: handleAddDialogOpen,\n            children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(GridFilterToolbarButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(GridColumnsToolbarButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(GridDensitySelector, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LocationAddDialog, {\n        handleClose: handleAddDialogClose,\n        handleCreate: handleCreate,\n        open: openAddDialog\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LocationUpdateDialog, {\n        handleClose: handleUpdateDialogClose,\n        handleUpdate: handleUpdate,\n        open: openUpdateDialog,\n        params: parameters\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(WorningDialog, {\n        openWorning: openWorning,\n        parameters: parameters,\n        handleClose: handleDeleteWorningClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.tableContainer,\n    children: /*#__PURE__*/_jsxDEV(XGrid, {\n      className: classes.root,\n      localeText: russian,\n      rowHeight: 40,\n      pageSize: 20,\n      headerHeight: 60,\n      columnBuffer: 2,\n      rowsPerPageOptions: [5, 10, 20, 50, 100],\n      pagination: true,\n      density: \"standard\",\n      rows: rows,\n      columns: columns,\n      showColumnRightBorder: true,\n      showCellRightBorder: true,\n      disableExtendRowFullWidth: true,\n      components: {\n        Toolbar: CustomToolbar\n      },\n      sortModel: [{\n        field: \"number\",\n        sort: \"asc\"\n      }],\n      checkboxSelection: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LocationTable, \"1X0d7zPfKMwms1ygljccqofP2JI=\", false, function () {\n  return [useSnackbar, useStyles];\n});\n\n_c = LocationTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"LocationTable\");","map":{"version":3,"sources":["/home/lilit/workspace/vtk/from_scratch_frontend_vtk/src/components/Location/LocationTable.js"],"names":["React","XGrid","Typography","makeStyles","GridToolbarContainer","GridDensitySelector","GridFilterToolbarButton","GridColumnsToolbarButton","IconButton","DeleteForeverOutlinedIcon","EditOutlinedIcon","russian","Tooltip","LocationAddDialog","LocationUpdateDialog","WorningDialog","Button","useSnackbar","useStyles","toolbarContainer","display","flexDirection","tableContainer","height","width","justifyContent","flexGrow","fontSize","tools","paddingLeft","paddingRight","marginBottom","iconButton","backgroundColor","root","border","fontWeight","wrapText","LocationTable","locations","deleteLocation","addLocation","updateLocation","openAddDialog","setOpenAddDialog","useState","openUpdateDialog","setOpenUpdateDialog","parameters","setParameters","openWorning","setOpenWorning","enqueueSnackbar","classes","handleAddDialogOpen","handleAddDialogClose","event","number","name","note","handleUpdateDialogClose","handleUpdateDialogOpen","params","Object","assign","row","handleCreate","id","variant","anchorOrigin","vertical","horizontal","isNaN","Number","location","err","console","log","handleUpdate","handleDeleteWorningClose","action","handleDeleteWorningOpen","editColumn","field","headerName","sortable","flex","renderCell","deleteColumn","columns","length","push","rows","CustomToolbar","add","Toolbar","sort"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { XGrid } from \"@material-ui/x-grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  GridToolbarContainer,\n  GridDensitySelector,\n  GridFilterToolbarButton,\n  GridColumnsToolbarButton\n} from \"@material-ui/x-grid\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteForeverOutlinedIcon from \"@material-ui/icons/DeleteForeverOutlined\";\nimport EditOutlinedIcon from \"@material-ui/icons/EditOutlined\";\nimport russian from \"../../constants/localeTextConstants.js\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport LocationAddDialog from \"./LocationAddDialog\";\nimport LocationUpdateDialog from \"./LocationUpdateDialog\";\nimport WorningDialog from \"../WorningDialog\";\nimport Button from \"@material-ui/core/Button\";\nimport { useSnackbar } from \"notistack\";\n\nconst useStyles = makeStyles({\n  toolbarContainer: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  tableContainer: {\n    display: \"flex\",\n    height: \"85vh\",\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    flexGrow: 1,\n    fontSize: \"18px\"\n  },\n  tools: {\n    width: \"100%\",\n    paddingLeft: 20,\n    paddingRight: 20,\n    marginBottom: 30,\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  iconButton: {\n    \"&:hover\": {\n      backgroundColor: \"#bdbdbd\"\n    }\n  },\n  root: {\n    \"& .MuiDataGrid-columnsContainer\": {\n      backgroundColor: \"#e8eaf6\",\n      border: \"#bdbdbd solid 1px\"\n    },\n    \"& .MuiDataGrid-colCellTitle\": {\n      fontWeight: \"bold\"\n    },\n    \"&.MuiDataGrid-row\": {\n      height: \"auto\",\n      wrapText: true\n    }\n  }\n});\n\nexport default function LocationTable({\n  locations,\n  deleteLocation,\n  addLocation,\n  updateLocation\n}) {\n  const [openAddDialog, setOpenAddDialog] = React.useState(false);\n  const [openUpdateDialog, setOpenUpdateDialog] = React.useState(false);\n  const [parameters, setParameters] = React.useState({});\n  const [openWorning, setOpenWorning] = React.useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const classes = useStyles();\n\n  const handleAddDialogOpen = () => {\n    setOpenAddDialog(true);\n  };\n\n  const handleAddDialogClose = (event, number, name, note) => {\n    setOpenAddDialog(false);\n  };\n\n  const handleUpdateDialogClose = (event, number, name, note) => {\n    setOpenUpdateDialog(false);\n  };\n  const handleUpdateDialogOpen = params => {\n    setParameters(Object.assign({}, params.row));\n    setOpenUpdateDialog(true);\n  };\n\n  const handleCreate = (event, number, name, note, id) => {\n    if (!name) {\n      enqueueSnackbar(\"Нобходимо заполнить поле Название\", {\n        variant: \"warning\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    } else if (number && isNaN(Number(number))) {\n      enqueueSnackbar('В поле \"номер\" необходимо ввести число!', {\n        variant: \"warning\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    } else {\n      let location = {};\n      location.name = name;\n      if (!!number) location.number = number;\n      if (!!note) location.note = note;\n      try {\n        addLocation(location);\n        setOpenAddDialog(false);\n      } catch (err) {\n        console.log({ err });\n      }\n    }\n  };\n  const handleUpdate = (event, number, name, note, id) => {\n    let location = {};\n    location.id = id;\n    if (!!name) location.name = name;\n    if (!!number) location.number = number;\n    if (!!note) location.note = note;\n    updateLocation(location);\n    setOpenUpdateDialog(false);\n  };\n\n  const handleDeleteWorningClose = action => {\n    setOpenWorning(false);\n    if (action === \"submit\") deleteLocation(parameters);\n  };\n\n  const handleDeleteWorningOpen = params => {\n    setOpenWorning(true);\n    setParameters(Object.assign({}, params.row));\n  };\n\n  const editColumn = {\n    field: \"edit\",\n    headerName: \"Редактировать\",\n    sortable: false,\n    flex: 0.15,\n    width: 135,\n    renderCell: (params: CellParams) => (\n      <IconButton\n        aria-label=\"edit\"\n        color=\"primary\"\n        className={classes.iconButton}\n        onClick={() => {\n          handleUpdateDialogOpen(params);\n        }}\n      >\n        <EditOutlinedIcon />\n      </IconButton>\n    )\n  };\n\n  const deleteColumn = {\n    field: \"delete\",\n    headerName: \"Удалить\",\n    sortable: false,\n    flex: 0.15,\n    renderCell: (params: CellParams) => (\n      <IconButton\n        aria-label=\"delete\"\n        color=\"secondary\"\n        className={classes.iconButton}\n        onClick={() => handleDeleteWorningOpen(params)}\n      >\n        <DeleteForeverOutlinedIcon />\n      </IconButton>\n    )\n  };\n\n  if (locations.columns && locations.columns.length > 0) {\n    locations.columns.push(editColumn);\n    locations.columns.push(deleteColumn);\n  }\n\n  const columns: ColDef[] = locations.columns ? locations.columns : [];\n  const rows = locations.rows ? locations.rows : [];\n\n  function CustomToolbar() {\n    return (\n      <GridToolbarContainer className={classes.toolbarContainer}>\n        <div>\n          <Typography variant=\"h5\" gutterBottom>\n            Места производства\n          </Typography>\n        </div>\n        <div className={classes.tools}>\n          <Tooltip title=\"Создать новый элемент\">\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.add}\n              onClick={handleAddDialogOpen}\n            >\n              Создать\n            </Button>\n          </Tooltip>\n          <div>\n            <GridFilterToolbarButton />\n            <GridColumnsToolbarButton />\n            <GridDensitySelector />\n          </div>\n        </div>\n        <LocationAddDialog\n          handleClose={handleAddDialogClose}\n          handleCreate={handleCreate}\n          open={openAddDialog}\n        />\n        <LocationUpdateDialog\n          handleClose={handleUpdateDialogClose}\n          handleUpdate={handleUpdate}\n          open={openUpdateDialog}\n          params={parameters}\n        />\n        <WorningDialog\n          openWorning={openWorning}\n          parameters={parameters}\n          handleClose={handleDeleteWorningClose}\n        />\n      </GridToolbarContainer>\n    );\n  }\n  return (\n    <div className={classes.tableContainer}>\n      <XGrid\n        className={classes.root}\n        localeText={russian}\n        rowHeight={40}\n        pageSize={20}\n        headerHeight={60}\n        columnBuffer={2}\n        rowsPerPageOptions={[5, 10, 20, 50, 100]}\n        pagination\n        density=\"standard\"\n        rows={rows}\n        columns={columns}\n        showColumnRightBorder={true}\n        showCellRightBorder={true}\n        disableExtendRowFullWidth={true}\n        components={{\n          Toolbar: CustomToolbar\n        }}\n        sortModel={[\n          {\n            field: \"number\",\n            sort: \"asc\"\n          }\n        ]}\n        checkboxSelection\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}