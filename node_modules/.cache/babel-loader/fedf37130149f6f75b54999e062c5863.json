{"ast":null,"code":"var _jsxFileName = \"/home/lilit/workspace/vtk/from_scratch_frontend_vtk/src/components/Naming/NamingTable.js\",\n    _s = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { XGrid } from \"@material-ui/x-grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Fab from \"@material-ui/core/Fab\";\nimport { GridToolbarContainer, GridToolbar } from \"@material-ui/x-grid\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteForeverOutlinedIcon from \"@material-ui/icons/DeleteForeverOutlined\";\nimport EditOutlinedIcon from \"@material-ui/icons/EditOutlined\";\nimport russian from \"../../constants/localeTextConstants.js\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport NamingAddDialog from \"./NamingAddDialog\";\nimport NamingUpdateDialog from \"./NamingUpdateDialog\";\nimport WorningDialog from \"../WorningDialog\";\nimport { useSnackbar } from \"notistack\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  toolbarContainer: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  tools: {\n    width: \"100%\",\n    paddingLeft: 20,\n    paddingRight: 20,\n    marginBottom: 30,\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  iconButton: {\n    \"&:hover\": {\n      backgroundColor: \"#bdbdbd\"\n    }\n  }\n});\nexport default function NamingTable({\n  namings,\n  deleteNaming,\n  addNaming,\n  updateNaming\n}) {\n  _s();\n\n  const [openAddDialog, setOpenAddDialog] = React.useState(false);\n  const [openUpdateDialog, setOpenUpdateDialog] = React.useState(false);\n  const [parameters, setParameters] = React.useState({});\n  const [types, setTypes] = React.useState([]);\n  const [openWorning, setOpenWorning] = React.useState(false);\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const classes = useStyles();\n\n  const handleAddDialogOpen = async () => {\n    const res = await fetch(\"http://localhost:3001/api/v1/types\");\n    const data = await res.json();\n    setTypes(data.types.rows);\n    setOpenAddDialog(true);\n  };\n\n  const handleAddDialogClose = (event, name, note) => {\n    setOpenAddDialog(false);\n  };\n\n  const handleUpdateDialogClose = (event, name, note) => {\n    setOpenUpdateDialog(false);\n  };\n\n  const handleUpdateDialogOpen = async params => {\n    const res = await fetch(\"http://localhost:3001/api/v1/types\");\n    const data = await res.json();\n    setTypes(data.types.rows);\n    setParameters(Object.assign({}, params.row));\n    setOpenUpdateDialog(true);\n  };\n\n  const handleCreate = (event, name, note, type) => {\n    if (!name) {\n      enqueueSnackbar(\"Необходимо заполнить поле Название\", {\n        variant: \"warning\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    } else if (!type) {\n      enqueueSnackbar(\"Необходимо создать тип в списке <<Типы изделий>>, далее выбрать при создании наименования.\", {\n        variant: \"warning\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    } else {\n      let naming = {};\n      naming.name = name;\n      if (!!note) naming.note = note;\n      if (!!type) naming.type = type;\n      addNaming(naming);\n      setOpenAddDialog(false);\n    }\n  };\n\n  const handleUpdate = (event, name, note, type, id) => {\n    let naming = {};\n    naming.id = id;\n    if (!!name) naming.name = name;\n    if (!!note) naming.note = note;\n    if (!!note) naming.type = type;\n    updateNaming(naming);\n    setOpenUpdateDialog(false);\n  };\n\n  const handleDeleteWorningClose = action => {\n    setOpenWorning(false);\n    if (action === \"submit\") deleteNaming(parameters);\n  };\n\n  const handleDeleteWorningOpen = params => {\n    setOpenWorning(true);\n    setParameters(Object.assign({}, params.row));\n  };\n\n  const editColumn = {\n    field: \"edit\",\n    headerName: \"Редактировать\",\n    sortable: false,\n    width: 135,\n    renderCell: params => /*#__PURE__*/_jsxDEV(IconButton, {\n      \"aria-label\": \"edit\",\n      color: \"primary\",\n      className: classes.iconButton,\n      onClick: () => {\n        handleUpdateDialogOpen(params);\n      },\n      children: /*#__PURE__*/_jsxDEV(EditOutlinedIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)\n  };\n  const deleteColumn = {\n    field: \"delete\",\n    headerName: \"Удалить\",\n    sortable: false,\n    renderCell: params => /*#__PURE__*/_jsxDEV(IconButton, {\n      \"aria-label\": \"delete\",\n      color: \"secondary\",\n      className: classes.iconButton,\n      onClick: () => handleDeleteWorningOpen(params),\n      children: /*#__PURE__*/_jsxDEV(DeleteForeverOutlinedIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)\n  };\n\n  if (namings.columns && namings.columns.length > 0) {\n    namings.columns.push(editColumn);\n    namings.columns.push(deleteColumn);\n  }\n\n  const columns = namings.columns ? namings.columns : [];\n  const rows = namings.rows ? namings.rows : [];\n\n  function CustomToolbar() {\n    return /*#__PURE__*/_jsxDEV(GridToolbarContainer, {\n      className: classes.toolbarContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          children: \"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.tools,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(GridToolbar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\",\n          children: /*#__PURE__*/_jsxDEV(Fab, {\n            size: \"medium\",\n            color: \"primary\",\n            \"aria-label\": \"add\",\n            className: classes.add,\n            onClick: () => handleAddDialogOpen(),\n            children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NamingAddDialog, {\n        handleClose: handleAddDialogClose,\n        handleCreate: handleCreate,\n        open: openAddDialog,\n        types: types\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NamingUpdateDialog, {\n        handleClose: handleUpdateDialogClose,\n        handleUpdate: handleUpdate,\n        open: openUpdateDialog,\n        params: parameters\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(WorningDialog, {\n        openWorning: openWorning,\n        parameters: parameters,\n        handleClose: handleDeleteWorningClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      height: 700,\n      width: \"100%\",\n      justifyContent: \"space-between\",\n      flexGrow: 1,\n      fontSize: \"18px\"\n    },\n    children: /*#__PURE__*/_jsxDEV(XGrid, {\n      localeText: russian,\n      rowHeight: 50,\n      pageSize: 20,\n      headerHeight: 80,\n      columnBuffer: 2,\n      rowsPerPageOptions: [5, 10, 20, 50, 100],\n      pagination: true,\n      density: \"standard\",\n      rows: rows,\n      columns: columns,\n      disableColumnMenu: true,\n      showColumnRightBorder: true,\n      showCellRightBorder: true,\n      disableExtendRowFullWidth: true,\n      components: {\n        Toolbar: CustomToolbar\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NamingTable, \"/d4grLZZpNdjeqqPp9OWCq/Lnho=\", false, function () {\n  return [useSnackbar, useStyles];\n});\n\n_c = NamingTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"NamingTable\");","map":{"version":3,"sources":["/home/lilit/workspace/vtk/from_scratch_frontend_vtk/src/components/Naming/NamingTable.js"],"names":["React","XGrid","Typography","makeStyles","AddIcon","Fab","GridToolbarContainer","GridToolbar","IconButton","DeleteForeverOutlinedIcon","EditOutlinedIcon","russian","Tooltip","NamingAddDialog","NamingUpdateDialog","WorningDialog","useSnackbar","useStyles","toolbarContainer","display","flexDirection","tools","width","paddingLeft","paddingRight","marginBottom","justifyContent","iconButton","backgroundColor","NamingTable","namings","deleteNaming","addNaming","updateNaming","openAddDialog","setOpenAddDialog","useState","openUpdateDialog","setOpenUpdateDialog","parameters","setParameters","types","setTypes","openWorning","setOpenWorning","enqueueSnackbar","classes","handleAddDialogOpen","res","fetch","data","json","rows","handleAddDialogClose","event","name","note","handleUpdateDialogClose","handleUpdateDialogOpen","params","Object","assign","row","handleCreate","type","variant","anchorOrigin","vertical","horizontal","naming","handleUpdate","id","handleDeleteWorningClose","action","handleDeleteWorningOpen","editColumn","field","headerName","sortable","renderCell","deleteColumn","columns","length","push","CustomToolbar","add","height","flexGrow","fontSize","Toolbar"],"mappings":";;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,KAAT,QAAsB,qBAAtB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,SAASC,oBAAT,EAA+BC,WAA/B,QAAkD,qBAAlD;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,yBAAP,MAAsC,0CAAtC;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,OAAP,MAAoB,wCAApB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,kBAAP,MAA+B,sBAA/B;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,SAASC,WAAT,QAA4B,WAA5B;;AAEA,MAAMC,SAAS,GAAGd,UAAU,CAAC;AAC3Be,EAAAA,gBAAgB,EAAE;AAChBC,IAAAA,OAAO,EAAE,MADO;AAEhBC,IAAAA,aAAa,EAAE;AAFC,GADS;AAK3BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE,MADF;AAELC,IAAAA,WAAW,EAAE,EAFR;AAGLC,IAAAA,YAAY,EAAE,EAHT;AAILC,IAAAA,YAAY,EAAE,EAJT;AAKLN,IAAAA,OAAO,EAAE,MALJ;AAMLC,IAAAA,aAAa,EAAE,KANV;AAOLM,IAAAA,cAAc,EAAE;AAPX,GALoB;AAc3BC,EAAAA,UAAU,EAAE;AACV,eAAW;AACTC,MAAAA,eAAe,EAAE;AADR;AADD;AAde,CAAD,CAA5B;AAqBA,eAAe,SAASC,WAAT,CAAqB;AAClCC,EAAAA,OADkC;AAElCC,EAAAA,YAFkC;AAGlCC,EAAAA,SAHkC;AAIlCC,EAAAA;AAJkC,CAArB,EAKZ;AAAA;;AACD,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCnC,KAAK,CAACoC,QAAN,CAAe,KAAf,CAA1C;AACA,QAAM,CAACC,gBAAD,EAAmBC,mBAAnB,IAA0CtC,KAAK,CAACoC,QAAN,CAAe,KAAf,CAAhD;AACA,QAAM,CAACG,UAAD,EAAaC,aAAb,IAA8BxC,KAAK,CAACoC,QAAN,CAAe,EAAf,CAApC;AACA,QAAM,CAACK,KAAD,EAAQC,QAAR,IAAoB1C,KAAK,CAACoC,QAAN,CAAe,EAAf,CAA1B;AACA,QAAM,CAACO,WAAD,EAAcC,cAAd,IAAgC5C,KAAK,CAACoC,QAAN,CAAe,KAAf,CAAtC;AACA,QAAM;AAAES,IAAAA;AAAF,MAAsB7B,WAAW,EAAvC;AAEA,QAAM8B,OAAO,GAAG7B,SAAS,EAAzB;;AAEA,QAAM8B,mBAAmB,GAAG,YAAY;AACtC,UAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,oCAAD,CAAvB;AACA,UAAMC,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;AACAT,IAAAA,QAAQ,CAACQ,IAAI,CAACT,KAAL,CAAWW,IAAZ,CAAR;AACAjB,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD,GALD;;AAOA,QAAMkB,oBAAoB,GAAG,CAACC,KAAD,EAAQC,IAAR,EAAcC,IAAd,KAAuB;AAClDrB,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,GAFD;;AAIA,QAAMsB,uBAAuB,GAAG,CAACH,KAAD,EAAQC,IAAR,EAAcC,IAAd,KAAuB;AACrDlB,IAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACD,GAFD;;AAGA,QAAMoB,sBAAsB,GAAG,MAAMC,MAAN,IAAgB;AAC7C,UAAMX,GAAG,GAAG,MAAMC,KAAK,CAAC,oCAAD,CAAvB;AACA,UAAMC,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;AACAT,IAAAA,QAAQ,CAACQ,IAAI,CAACT,KAAL,CAAWW,IAAZ,CAAR;AACAZ,IAAAA,aAAa,CAACoB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,MAAM,CAACG,GAAzB,CAAD,CAAb;AACAxB,IAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACD,GAND;;AAQA,QAAMyB,YAAY,GAAG,CAACT,KAAD,EAAQC,IAAR,EAAcC,IAAd,EAAoBQ,IAApB,KAA6B;AAChD,QAAI,CAACT,IAAL,EAAW;AACTV,MAAAA,eAAe,CAAC,oCAAD,EAAuC;AACpDoB,QAAAA,OAAO,EAAE,SAD2C;AAEpDC,QAAAA,YAAY,EAAE;AACZC,UAAAA,QAAQ,EAAE,KADE;AAEZC,UAAAA,UAAU,EAAE;AAFA;AAFsC,OAAvC,CAAf;AAOD,KARD,MAQO,IAAI,CAACJ,IAAL,EAAW;AAChBnB,MAAAA,eAAe,CACb,4FADa,EAEb;AACEoB,QAAAA,OAAO,EAAE,SADX;AAEEC,QAAAA,YAAY,EAAE;AACZC,UAAAA,QAAQ,EAAE,KADE;AAEZC,UAAAA,UAAU,EAAE;AAFA;AAFhB,OAFa,CAAf;AAUD,KAXM,MAWA;AACL,UAAIC,MAAM,GAAG,EAAb;AACAA,MAAAA,MAAM,CAACd,IAAP,GAAcA,IAAd;AACA,UAAI,CAAC,CAACC,IAAN,EAAYa,MAAM,CAACb,IAAP,GAAcA,IAAd;AACZ,UAAI,CAAC,CAACQ,IAAN,EAAYK,MAAM,CAACL,IAAP,GAAcA,IAAd;AACZhC,MAAAA,SAAS,CAACqC,MAAD,CAAT;AACAlC,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD;AACF,GA5BD;;AA8BA,QAAMmC,YAAY,GAAG,CAAChB,KAAD,EAAQC,IAAR,EAAcC,IAAd,EAAoBQ,IAApB,EAA0BO,EAA1B,KAAiC;AACpD,QAAIF,MAAM,GAAG,EAAb;AACAA,IAAAA,MAAM,CAACE,EAAP,GAAYA,EAAZ;AACA,QAAI,CAAC,CAAChB,IAAN,EAAYc,MAAM,CAACd,IAAP,GAAcA,IAAd;AACZ,QAAI,CAAC,CAACC,IAAN,EAAYa,MAAM,CAACb,IAAP,GAAcA,IAAd;AACZ,QAAI,CAAC,CAACA,IAAN,EAAYa,MAAM,CAACL,IAAP,GAAcA,IAAd;AACZ/B,IAAAA,YAAY,CAACoC,MAAD,CAAZ;AACA/B,IAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACD,GARD;;AAUA,QAAMkC,wBAAwB,GAAGC,MAAM,IAAI;AACzC7B,IAAAA,cAAc,CAAC,KAAD,CAAd;AACA,QAAI6B,MAAM,KAAK,QAAf,EAAyB1C,YAAY,CAACQ,UAAD,CAAZ;AAC1B,GAHD;;AAKA,QAAMmC,uBAAuB,GAAGf,MAAM,IAAI;AACxCf,IAAAA,cAAc,CAAC,IAAD,CAAd;AACAJ,IAAAA,aAAa,CAACoB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,MAAM,CAACG,GAAzB,CAAD,CAAb;AACD,GAHD;;AAKA,QAAMa,UAAU,GAAG;AACjBC,IAAAA,KAAK,EAAE,MADU;AAEjBC,IAAAA,UAAU,EAAE,eAFK;AAGjBC,IAAAA,QAAQ,EAAE,KAHO;AAKjBxD,IAAAA,KAAK,EAAE,GALU;AAMjByD,IAAAA,UAAU,EAAGpB,MAAD,iBACV,QAAC,UAAD;AACE,oBAAW,MADb;AAEE,MAAA,KAAK,EAAC,SAFR;AAGE,MAAA,SAAS,EAAEb,OAAO,CAACnB,UAHrB;AAIE,MAAA,OAAO,EAAE,MAAM;AACb+B,QAAAA,sBAAsB,CAACC,MAAD,CAAtB;AACD,OANH;AAAA,6BAQE,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA;AAPe,GAAnB;AAoBA,QAAMqB,YAAY,GAAG;AACnBJ,IAAAA,KAAK,EAAE,QADY;AAEnBC,IAAAA,UAAU,EAAE,SAFO;AAGnBC,IAAAA,QAAQ,EAAE,KAHS;AAInBC,IAAAA,UAAU,EAAGpB,MAAD,iBACV,QAAC,UAAD;AACE,oBAAW,QADb;AAEE,MAAA,KAAK,EAAC,WAFR;AAGE,MAAA,SAAS,EAAEb,OAAO,CAACnB,UAHrB;AAIE,MAAA,OAAO,EAAE,MAAM+C,uBAAuB,CAACf,MAAD,CAJxC;AAAA,6BAME,QAAC,yBAAD;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA;AALiB,GAArB;;AAgBA,MAAI7B,OAAO,CAACmD,OAAR,IAAmBnD,OAAO,CAACmD,OAAR,CAAgBC,MAAhB,GAAyB,CAAhD,EAAmD;AACjDpD,IAAAA,OAAO,CAACmD,OAAR,CAAgBE,IAAhB,CAAqBR,UAArB;AACA7C,IAAAA,OAAO,CAACmD,OAAR,CAAgBE,IAAhB,CAAqBH,YAArB;AACD;;AAED,QAAMC,OAAiB,GAAGnD,OAAO,CAACmD,OAAR,GAAkBnD,OAAO,CAACmD,OAA1B,GAAoC,EAA9D;AACA,QAAM7B,IAAI,GAAGtB,OAAO,CAACsB,IAAR,GAAetB,OAAO,CAACsB,IAAvB,GAA8B,EAA3C;;AAEA,WAASgC,aAAT,GAAyB;AACvB,wBACE,QAAC,oBAAD;AAAsB,MAAA,SAAS,EAAEtC,OAAO,CAAC5B,gBAAzC;AAAA,8BACE;AAAA,+BACE,QAAC,UAAD;AAAY,UAAA,OAAO,EAAC,IAApB;AAAyB,UAAA,YAAY,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAME;AAAK,QAAA,SAAS,EAAE4B,OAAO,CAACzB,KAAxB;AAAA,gCACE;AAAA,iCACE,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE,QAAC,OAAD;AAAS,UAAA,KAAK,EAAC,4CAAf;AAAA,iCACE,QAAC,GAAD;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,KAAK,EAAC,SAFR;AAGE,0BAAW,KAHb;AAIE,YAAA,SAAS,EAAEyB,OAAO,CAACuC,GAJrB;AAKE,YAAA,OAAO,EAAE,MAAMtC,mBAAmB,EALpC;AAAA,mCAOE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,cANF,eAsBE,QAAC,eAAD;AACE,QAAA,WAAW,EAAEM,oBADf;AAEE,QAAA,YAAY,EAAEU,YAFhB;AAGE,QAAA,IAAI,EAAE7B,aAHR;AAIE,QAAA,KAAK,EAAEO;AAJT;AAAA;AAAA;AAAA;AAAA,cAtBF,eA4BE,QAAC,kBAAD;AACE,QAAA,WAAW,EAAEgB,uBADf;AAEE,QAAA,YAAY,EAAEa,YAFhB;AAGE,QAAA,IAAI,EAAEjC,gBAHR;AAIE,QAAA,MAAM,EAAEE;AAJV;AAAA;AAAA;AAAA;AAAA,cA5BF,eAkCE,QAAC,aAAD;AACE,QAAA,WAAW,EAAEI,WADf;AAEE,QAAA,UAAU,EAAEJ,UAFd;AAGE,QAAA,WAAW,EAAEiC;AAHf;AAAA;AAAA;AAAA;AAAA,cAlCF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AA0CD;;AACD,sBACE;AACE,IAAA,KAAK,EAAE;AACLrD,MAAAA,OAAO,EAAE,MADJ;AAELmE,MAAAA,MAAM,EAAE,GAFH;AAGLhE,MAAAA,KAAK,EAAE,MAHF;AAILI,MAAAA,cAAc,EAAE,eAJX;AAKL6D,MAAAA,QAAQ,EAAE,CALL;AAMLC,MAAAA,QAAQ,EAAE;AANL,KADT;AAAA,2BAUE,QAAC,KAAD;AACE,MAAA,UAAU,EAAE7E,OADd;AAEE,MAAA,SAAS,EAAE,EAFb;AAGE,MAAA,QAAQ,EAAE,EAHZ;AAIE,MAAA,YAAY,EAAE,EAJhB;AAKE,MAAA,YAAY,EAAE,CALhB;AAME,MAAA,kBAAkB,EAAE,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,EAAZ,EAAgB,GAAhB,CANtB;AAOE,MAAA,UAAU,MAPZ;AAQE,MAAA,OAAO,EAAC,UARV;AASE,MAAA,IAAI,EAAEyC,IATR;AAUE,MAAA,OAAO,EAAE6B,OAVX;AAWE,MAAA,iBAAiB,EAAE,IAXrB;AAYE,MAAA,qBAAqB,EAAE,IAZzB;AAaE,MAAA,mBAAmB,EAAE,IAbvB;AAcE,MAAA,yBAAyB,EAAE,IAd7B;AAeE,MAAA,UAAU,EAAE;AACVQ,QAAAA,OAAO,EAAEL;AADC;AAfd;AAAA;AAAA;AAAA;AAAA;AAVF;AAAA;AAAA;AAAA;AAAA,UADF;AAgCD;;GA/MuBvD,W;UAWMb,W,EAEZC,S;;;KAbMY,W","sourcesContent":["import * as React from \"react\";\nimport { XGrid } from \"@material-ui/x-grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Fab from \"@material-ui/core/Fab\";\nimport { GridToolbarContainer, GridToolbar } from \"@material-ui/x-grid\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteForeverOutlinedIcon from \"@material-ui/icons/DeleteForeverOutlined\";\nimport EditOutlinedIcon from \"@material-ui/icons/EditOutlined\";\nimport russian from \"../../constants/localeTextConstants.js\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport NamingAddDialog from \"./NamingAddDialog\";\nimport NamingUpdateDialog from \"./NamingUpdateDialog\";\nimport WorningDialog from \"../WorningDialog\";\nimport { useSnackbar } from \"notistack\";\n\nconst useStyles = makeStyles({\n  toolbarContainer: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  tools: {\n    width: \"100%\",\n    paddingLeft: 20,\n    paddingRight: 20,\n    marginBottom: 30,\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  iconButton: {\n    \"&:hover\": {\n      backgroundColor: \"#bdbdbd\"\n    }\n  }\n});\n\nexport default function NamingTable({\n  namings,\n  deleteNaming,\n  addNaming,\n  updateNaming\n}) {\n  const [openAddDialog, setOpenAddDialog] = React.useState(false);\n  const [openUpdateDialog, setOpenUpdateDialog] = React.useState(false);\n  const [parameters, setParameters] = React.useState({});\n  const [types, setTypes] = React.useState([]);\n  const [openWorning, setOpenWorning] = React.useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const classes = useStyles();\n\n  const handleAddDialogOpen = async () => {\n    const res = await fetch(\"http://localhost:3001/api/v1/types\");\n    const data = await res.json();\n    setTypes(data.types.rows);\n    setOpenAddDialog(true);\n  };\n\n  const handleAddDialogClose = (event, name, note) => {\n    setOpenAddDialog(false);\n  };\n\n  const handleUpdateDialogClose = (event, name, note) => {\n    setOpenUpdateDialog(false);\n  };\n  const handleUpdateDialogOpen = async params => {\n    const res = await fetch(\"http://localhost:3001/api/v1/types\");\n    const data = await res.json();\n    setTypes(data.types.rows);\n    setParameters(Object.assign({}, params.row));\n    setOpenUpdateDialog(true);\n  };\n\n  const handleCreate = (event, name, note, type) => {\n    if (!name) {\n      enqueueSnackbar(\"Необходимо заполнить поле Название\", {\n        variant: \"warning\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    } else if (!type) {\n      enqueueSnackbar(\n        \"Необходимо создать тип в списке <<Типы изделий>>, далее выбрать при создании наименования.\",\n        {\n          variant: \"warning\",\n          anchorOrigin: {\n            vertical: \"top\",\n            horizontal: \"center\"\n          }\n        }\n      );\n    } else {\n      let naming = {};\n      naming.name = name;\n      if (!!note) naming.note = note;\n      if (!!type) naming.type = type;\n      addNaming(naming);\n      setOpenAddDialog(false);\n    }\n  };\n\n  const handleUpdate = (event, name, note, type, id) => {\n    let naming = {};\n    naming.id = id;\n    if (!!name) naming.name = name;\n    if (!!note) naming.note = note;\n    if (!!note) naming.type = type;\n    updateNaming(naming);\n    setOpenUpdateDialog(false);\n  };\n\n  const handleDeleteWorningClose = action => {\n    setOpenWorning(false);\n    if (action === \"submit\") deleteNaming(parameters);\n  };\n\n  const handleDeleteWorningOpen = params => {\n    setOpenWorning(true);\n    setParameters(Object.assign({}, params.row));\n  };\n\n  const editColumn = {\n    field: \"edit\",\n    headerName: \"Редактировать\",\n    sortable: false,\n\n    width: 135,\n    renderCell: (params: CellParams) => (\n      <IconButton\n        aria-label=\"edit\"\n        color=\"primary\"\n        className={classes.iconButton}\n        onClick={() => {\n          handleUpdateDialogOpen(params);\n        }}\n      >\n        <EditOutlinedIcon />\n      </IconButton>\n    )\n  };\n\n  const deleteColumn = {\n    field: \"delete\",\n    headerName: \"Удалить\",\n    sortable: false,\n    renderCell: (params: CellParams) => (\n      <IconButton\n        aria-label=\"delete\"\n        color=\"secondary\"\n        className={classes.iconButton}\n        onClick={() => handleDeleteWorningOpen(params)}\n      >\n        <DeleteForeverOutlinedIcon />\n      </IconButton>\n    )\n  };\n\n  if (namings.columns && namings.columns.length > 0) {\n    namings.columns.push(editColumn);\n    namings.columns.push(deleteColumn);\n  }\n\n  const columns: ColDef[] = namings.columns ? namings.columns : [];\n  const rows = namings.rows ? namings.rows : [];\n\n  function CustomToolbar() {\n    return (\n      <GridToolbarContainer className={classes.toolbarContainer}>\n        <div>\n          <Typography variant=\"h5\" gutterBottom>\n            Наименования\n          </Typography>\n        </div>\n        <div className={classes.tools}>\n          <div>\n            <GridToolbar />\n          </div>\n          <Tooltip title=\"Создать\">\n            <Fab\n              size=\"medium\"\n              color=\"primary\"\n              aria-label=\"add\"\n              className={classes.add}\n              onClick={() => handleAddDialogOpen()}\n            >\n              <AddIcon />\n            </Fab>\n          </Tooltip>\n        </div>\n        <NamingAddDialog\n          handleClose={handleAddDialogClose}\n          handleCreate={handleCreate}\n          open={openAddDialog}\n          types={types}\n        />\n        <NamingUpdateDialog\n          handleClose={handleUpdateDialogClose}\n          handleUpdate={handleUpdate}\n          open={openUpdateDialog}\n          params={parameters}\n        />\n        <WorningDialog\n          openWorning={openWorning}\n          parameters={parameters}\n          handleClose={handleDeleteWorningClose}\n        />\n      </GridToolbarContainer>\n    );\n  }\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        height: 700,\n        width: \"100%\",\n        justifyContent: \"space-between\",\n        flexGrow: 1,\n        fontSize: \"18px\"\n      }}\n    >\n      <XGrid\n        localeText={russian}\n        rowHeight={50}\n        pageSize={20}\n        headerHeight={80}\n        columnBuffer={2}\n        rowsPerPageOptions={[5, 10, 20, 50, 100]}\n        pagination\n        density=\"standard\"\n        rows={rows}\n        columns={columns}\n        disableColumnMenu={true}\n        showColumnRightBorder={true}\n        showCellRightBorder={true}\n        disableExtendRowFullWidth={true}\n        components={{\n          Toolbar: CustomToolbar\n        }}\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}