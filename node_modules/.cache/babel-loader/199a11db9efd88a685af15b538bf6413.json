{"ast":null,"code":"var _jsxFileName = \"/home/lilit/workspace/vtk/from_scratch_frontend_vtk/src/containers/Locations.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useSnackbar } from \"notistack\";\nimport LocationTable from \"../components/LocationTable\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar moment = require(\"moment\");\n\nconst Location = () => {\n  _s();\n\n  const [showAddLocation, setShowAddLocation] = useState(false);\n  const [rows, setRows] = useState({});\n  const [columns, setColumns] = useState({});\n  const [locations, setLocations] = useState({});\n  const {\n    enqueueSnackbar,\n    closeSnackbar\n  } = useSnackbar();\n  useEffect(() => {\n    const getLocations = async () => {\n      const locationsFromServer = await fetchLocations();\n      setLocations(locationsFromServer);\n      setColumns(locationsFromServer.columns);\n      setRows(locationsFromServer.rows);\n    };\n\n    getLocations();\n  }, []); // Fetch Locations\n\n  const fetchLocations = async () => {\n    const res = await fetch(\"http://localhost:3001/api/v1/locations\");\n    const data = await res.json();\n    console.log({\n      data\n    });\n    let columns = [];\n    let rows = data.locations.rows;\n    let locColumns = [];\n    if (data.locations.count > 0) locColumns = Object.keys(data.locations.rows[0]);\n    locColumns.map(item => {\n      let obj = {};\n\n      switch (item) {\n        case \"id\":\n          obj.headerName = \"ID\";\n          obj.field = item;\n          break;\n\n        case \"number\":\n          obj.headerName = \"Номер\";\n          obj.field = item;\n          break;\n\n        case \"name\":\n          obj.headerName = \"Название\";\n          obj.field = item;\n          obj.flex = 0.3;\n          break;\n\n        case \"createdAt\":\n          obj.headerName = \"Дата создания\";\n          obj.field = item;\n          obj.flex = 0.2;\n          break;\n\n        case \"updatedAt\":\n          obj.headerName = \"Дата редактирования\";\n          obj.field = item;\n          obj.flex = 0.3;\n          break;\n\n        case \"note\":\n          obj.headerName = \"Примечание\";\n          obj.field = item;\n          obj.flex = 0.3;\n          break;\n      }\n\n      if (data.locations.count > 0 && item !== \"deletedAt\") {\n        columns.push(obj);\n      }\n    });\n    let locations = {};\n    locations.rows = rows.map(row => {\n      row.createdAt = moment(row.createdAt).format(\"YYYY.MM.DD HH:mm\");\n      row.updatedAt = moment(row.updatedAt).format(\"YYYY.MM.DD HH:mm\");\n      return row;\n    });\n    locations.columns = columns;\n    return {\n      locations,\n      rows: locations.rows,\n      columns: locations.columns\n    };\n  }; // // Fetch Location\n  // const fetchLocation = async id => {\n  //   const res = await fetch(`http://localhost:3001/api/v1/locations/${id}`);\n  //   const data = await res.json();\n  //\n  //   return data;\n  // };\n  // Add Location\n\n\n  const addLocation = async location => {\n    console.log({\n      location\n    });\n\n    try {\n      const res = await fetch(\"http://localhost:3001/api/v1/locations/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify(location)\n      });\n      const data = await res.json();\n      console.log({\n        data\n      });\n      if (data[\"Bad Request\"]) throw new Error(data[\"Bad Request\"]);\n      if (data[\"errorMessage\"]) throw new Error(data[\"errorMessage\"]);\n      console.log({\n        locations\n      });\n      locations.rows.push(data.location[0]);\n      console.log({\n        locations\n      }); // Object.assign(locations, ...sources);\n\n      setLocations([...locations, data.location[0]]);\n    } catch (err) {\n      console.log(err);\n      enqueueSnackbar(`${err}`, {\n        variant: \"error\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    } // const id = Math.floor(Math.random() * 10000) + 1\n    // const newLocation = { id, ...location }\n    // setLocations([...locations, newLocation])\n\n  };\n\n  const deleteLocation = async id => {\n    console.log(\"deleteLocation\", id);\n  }; // // Delete Location\n  // const deleteLocation = async id => {\n  //   const res = await fetch(`http://localhost:3001/api/v1/locations/${id}`, {\n  //     method: \"DELETE\"\n  //   });\n  //   //We should control the response status to decide if we will change the state or not.\n  //   res.status === 200\n  //     ? setLocations(locations.filter(location => location.id !== id))\n  //     : alert(\"Error Deleting This Location\");\n  // };\n  // // Toggle Reminder\n  // const toggleReminder = async id => {\n  //   const locationToToggle = await fetchLocation(id);\n  //   const updLocation = {\n  //     ...locationToToggle,\n  //     reminder: !locationToToggle.reminder\n  //   };\n  //\n  //   const res = await fetch(`http://localhost:3001/api/v1/locations/${id}`, {\n  //     method: \"PUT\",\n  //     headers: {\n  //       \"Content-type\": \"application/json\"\n  //     },\n  //     body: JSON.stringify(updLocation)\n  //   });\n  //\n  //   const data = await res.json();\n  //\n  //   setLocations(\n  //     locations.map(location =>\n  //       location.id === id ? { ...location, reminder: data.reminder } : location\n  //     )\n  //   );\n  // };\n\n\n  return /*#__PURE__*/_jsxDEV(LocationTable, {\n    locations: locations,\n    handleDeleteRow: deleteLocation,\n    addLocation: addLocation\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Location, \"Vz5joqTL4WBqg8hlLkcr/R6OJY0=\", false, function () {\n  return [useSnackbar];\n});\n\n_c = Location;\nexport default Location;\n\nvar _c;\n\n$RefreshReg$(_c, \"Location\");","map":{"version":3,"sources":["/home/lilit/workspace/vtk/from_scratch_frontend_vtk/src/containers/Locations.js"],"names":["useState","useEffect","useSnackbar","LocationTable","moment","require","Location","showAddLocation","setShowAddLocation","rows","setRows","columns","setColumns","locations","setLocations","enqueueSnackbar","closeSnackbar","getLocations","locationsFromServer","fetchLocations","res","fetch","data","json","console","log","locColumns","count","Object","keys","map","item","obj","headerName","field","flex","push","row","createdAt","format","updatedAt","addLocation","location","method","headers","body","JSON","stringify","Error","err","variant","anchorOrigin","vertical","horizontal","deleteLocation","id"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useSnackbar } from \"notistack\";\nimport LocationTable from \"../components/LocationTable\";\nvar moment = require(\"moment\");\n\nconst Location = () => {\n  const [showAddLocation, setShowAddLocation] = useState(false);\n  const [rows, setRows] = useState({});\n  const [columns, setColumns] = useState({});\n  const [locations, setLocations] = useState({});\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  useEffect(() => {\n    const getLocations = async () => {\n      const locationsFromServer = await fetchLocations();\n      setLocations(locationsFromServer);\n      setColumns(locationsFromServer.columns);\n      setRows(locationsFromServer.rows);\n    };\n    getLocations();\n  }, []);\n\n  // Fetch Locations\n  const fetchLocations = async () => {\n    const res = await fetch(\"http://localhost:3001/api/v1/locations\");\n    const data = await res.json();\n    console.log({ data });\n    let columns = [];\n    let rows = data.locations.rows;\n    let locColumns = [];\n    if (data.locations.count > 0)\n      locColumns = Object.keys(data.locations.rows[0]);\n\n    locColumns.map(item => {\n      let obj = {};\n      switch (item) {\n        case \"id\":\n          obj.headerName = \"ID\";\n          obj.field = item;\n          break;\n        case \"number\":\n          obj.headerName = \"Номер\";\n          obj.field = item;\n          break;\n        case \"name\":\n          obj.headerName = \"Название\";\n          obj.field = item;\n          obj.flex = 0.3;\n          break;\n        case \"createdAt\":\n          obj.headerName = \"Дата создания\";\n          obj.field = item;\n          obj.flex = 0.2;\n          break;\n        case \"updatedAt\":\n          obj.headerName = \"Дата редактирования\";\n          obj.field = item;\n          obj.flex = 0.3;\n          break;\n        case \"note\":\n          obj.headerName = \"Примечание\";\n          obj.field = item;\n          obj.flex = 0.3;\n          break;\n      }\n      if (data.locations.count > 0 && item !== \"deletedAt\") {\n        columns.push(obj);\n      }\n    });\n\n    let locations = {};\n    locations.rows = rows.map(row => {\n      row.createdAt = moment(row.createdAt).format(\"YYYY.MM.DD HH:mm\");\n      row.updatedAt = moment(row.updatedAt).format(\"YYYY.MM.DD HH:mm\");\n      return row;\n    });\n    locations.columns = columns;\n    return { locations, rows: locations.rows, columns: locations.columns };\n  };\n\n  // // Fetch Location\n  // const fetchLocation = async id => {\n  //   const res = await fetch(`http://localhost:3001/api/v1/locations/${id}`);\n  //   const data = await res.json();\n  //\n  //   return data;\n  // };\n\n  // Add Location\n  const addLocation = async location => {\n    console.log({ location });\n    try {\n      const res = await fetch(\"http://localhost:3001/api/v1/locations/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify(location)\n      });\n\n      const data = await res.json();\n      console.log({ data });\n      if (data[\"Bad Request\"]) throw new Error(data[\"Bad Request\"]);\n      if (data[\"errorMessage\"]) throw new Error(data[\"errorMessage\"]);\n      console.log({ locations });\n      locations.rows.push(data.location[0]);\n      console.log({ locations });\n\n      // Object.assign(locations, ...sources);\n      setLocations([...locations, data.location[0]]);\n    } catch (err) {\n      console.log(err);\n      enqueueSnackbar(`${err}`, {\n        variant: \"error\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    }\n\n    // const id = Math.floor(Math.random() * 10000) + 1\n    // const newLocation = { id, ...location }\n    // setLocations([...locations, newLocation])\n  };\n  const deleteLocation = async id => {\n    console.log(\"deleteLocation\", id);\n  };\n\n  // // Delete Location\n  // const deleteLocation = async id => {\n  //   const res = await fetch(`http://localhost:3001/api/v1/locations/${id}`, {\n  //     method: \"DELETE\"\n  //   });\n  //   //We should control the response status to decide if we will change the state or not.\n  //   res.status === 200\n  //     ? setLocations(locations.filter(location => location.id !== id))\n  //     : alert(\"Error Deleting This Location\");\n  // };\n\n  // // Toggle Reminder\n  // const toggleReminder = async id => {\n  //   const locationToToggle = await fetchLocation(id);\n  //   const updLocation = {\n  //     ...locationToToggle,\n  //     reminder: !locationToToggle.reminder\n  //   };\n  //\n  //   const res = await fetch(`http://localhost:3001/api/v1/locations/${id}`, {\n  //     method: \"PUT\",\n  //     headers: {\n  //       \"Content-type\": \"application/json\"\n  //     },\n  //     body: JSON.stringify(updLocation)\n  //   });\n  //\n  //   const data = await res.json();\n  //\n  //   setLocations(\n  //     locations.map(location =>\n  //       location.id === id ? { ...location, reminder: data.reminder } : location\n  //     )\n  //   );\n  // };\n  return (\n    <LocationTable\n      locations={locations}\n      handleDeleteRow={deleteLocation}\n      addLocation={addLocation}\n    />\n  );\n};\n\nexport default Location;\n"]},"metadata":{},"sourceType":"module"}