{"ast":null,"code":"var _jsxFileName = \"/home/lilit/workspace/vtk/from_scratch_frontend_vtk/src/containers/Namings.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useSnackbar } from \"notistack\";\nimport NamingTable from \"../components/Naming/NamingTable\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar moment = require(\"moment\");\n\nconst Naming = () => {\n  _s();\n\n  const [namings, setNamings] = useState({});\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  useEffect(() => {\n    const getNamings = async () => {\n      const namingsFromServer = await fetchNamings();\n      setNamings(namingsFromServer);\n    };\n\n    getNamings();\n  }, []); // Fetch Namings\n\n  const fetchNamings = async () => {\n    const res = await fetch(\"http://localhost:3001/api/v1/namings\");\n    const data = await res.json();\n    let columns = [];\n    let rows = data.namings.rows.map(row => {\n      row.createdAt = moment(row.createdAt).format(\"YYYY.MM.DD HH:mm\");\n      row.updatedAt = moment(row.updatedAt).format(\"YYYY.MM.DD HH:mm\");\n      if (row.type) row.type = row.type.name;\n      return row;\n    });\n    let locColumns = [];\n    if (data.namings.count > 0) locColumns = Object.keys(data.namings.rows[0]);\n    locColumns.forEach(item => {\n      let obj = {};\n\n      switch (item) {\n        case \"id\":\n          obj.headerName = \"ID\";\n          obj.field = item;\n          break;\n\n        case \"name\":\n          obj.headerName = \"Название\";\n          obj.field = item;\n          obj.flex = 0.4;\n          break;\n\n        case \"type\":\n          obj.headerName = \"Тип\";\n          obj.field = item;\n          obj.flex = 0.4;\n          break;\n\n        case \"createdAt\":\n          obj.headerName = \"Дата создания\";\n          obj.field = item;\n          obj.flex = 0.2;\n          break;\n\n        case \"updatedAt\":\n          obj.headerName = \"Дата редактирования\";\n          obj.field = item;\n          obj.flex = 0.2;\n          break;\n\n        case \"note\":\n          obj.headerName = \"Примечание\";\n          obj.field = item;\n          obj.flex = 0.4;\n          break;\n\n        default:\n          break;\n      }\n\n      if (data.namings.count > 0 && item !== \"deletedAt\" && item !== \"typeId\") {\n        columns.push(obj);\n      }\n    });\n    let namings = {}; // move the type in 3 column left\n\n    columns.forEach((col, index) => {\n      if (col.headerName === \"Тип\") {\n        columns.splice(index, 1);\n        columns.splice(index - 3, 0, col);\n      }\n    });\n    namings.rows = rows;\n    namings.columns = columns;\n    return namings;\n  }; // Add Naming\n\n\n  const addNaming = async naming => {\n    try {\n      const res = await fetch(\"http://localhost:3001/api/v1/namings/\", {\n        method: \"POST\",\n        body: JSON.stringify(naming),\n        headers: {\n          \"Content-type\": \"application/json\"\n        }\n      });\n      const data = await res.json();\n      console.log({\n        data\n      });\n      if (data[\"Bad Request\"]) throw new Error(data[\"Bad Request\"]);\n      if (data[\"errorMessage\"]) throw new Error(data[\"errorMessage\"]);\n      let newRows = [];\n      data.naming[0].type = data.naming[0].type.name;\n      console.log(\"data.naming[0] \", data.naming[0]);\n\n      if (namings.columns.length > 0) {\n        data.naming[0].createdAt = moment(data.naming.createdAt).format(\"YYYY.MM.DD HH:mm\");\n        data.naming[0].updatedAt = moment(data.naming.updatedAt).format(\"YYYY.MM.DD HH:mm\");\n        newRows = [...namings.rows, data.naming[0]];\n        let newNamings = Object.assign({}, {\n          columns: namings.columns,\n          rows: newRows\n        });\n        setNamings(newNamings);\n      } else {\n        const namingsFromServer = await fetchNamings();\n        setNamings(namingsFromServer);\n      }\n    } catch (err) {\n      console.log(err);\n      enqueueSnackbar(`${err.message}`, {\n        variant: \"error\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    }\n  }; // Add Naming\n\n\n  const updateNaming = async naming => {\n    console.log(\"naming = \", naming);\n\n    try {\n      const res = await fetch(`http://localhost:3001/api/v1/namings/${naming.id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify(naming)\n      });\n      const data = await res.json();\n      if (data[\"Bad Request\"]) throw new Error(data[\"Bad Request\"]);\n      if (data[\"errorMessage\"]) throw new Error(data[\"errorMessage\"]);\n      data.naming.createdAt = moment(data.naming.createdAt).format(\"YYYY.MM.DD HH:mm\");\n      data.naming.updatedAt = moment(data.naming.updatedAt).format(\"YYYY.MM.DD HH:mm\");\n      let newRows = [];\n\n      if (namings.columns.length > 0) {\n        newRows = namings.rows.map(loc => loc.id === naming.id ? data.naming : loc);\n        let newNamings = Object.assign({}, {\n          columns: namings.columns,\n          rows: newRows\n        });\n        setNamings(newNamings);\n      } else {\n        const namingsFromServer = await fetchNamings();\n        setNamings(namingsFromServer);\n      }\n    } catch (err) {\n      console.log(err);\n      enqueueSnackbar(`${err.message}`, {\n        variant: \"error\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    }\n  }; // Delete Naming\n\n\n  const deleteNaming = async parameters => {\n    try {\n      await fetch(`http://localhost:3001/api/v1/namings/${parameters.id}`, {\n        method: \"DELETE\"\n      });\n      let newRows = namings.rows.filter(row => row.id !== parameters.id);\n      let newNamings = Object.assign({}, {\n        columns: namings.columns,\n        rows: newRows\n      });\n      setNamings(newNamings);\n    } catch (err) {\n      console.log(err);\n      enqueueSnackbar(`${err.message}`, {\n        variant: \"error\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(NamingTable, {\n    namings: namings,\n    deleteNaming: deleteNaming,\n    addNaming: addNaming,\n    updateNaming: updateNaming\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Naming, \"Frk3fpdIsB7ljUXAuz20B1c2hlI=\", false, function () {\n  return [useSnackbar];\n});\n\n_c = Naming;\nexport default Naming;\n\nvar _c;\n\n$RefreshReg$(_c, \"Naming\");","map":{"version":3,"sources":["/home/lilit/workspace/vtk/from_scratch_frontend_vtk/src/containers/Namings.js"],"names":["useState","useEffect","useSnackbar","NamingTable","moment","require","Naming","namings","setNamings","enqueueSnackbar","getNamings","namingsFromServer","fetchNamings","res","fetch","data","json","columns","rows","map","row","createdAt","format","updatedAt","type","name","locColumns","count","Object","keys","forEach","item","obj","headerName","field","flex","push","col","index","splice","addNaming","naming","method","body","JSON","stringify","headers","console","log","Error","newRows","length","newNamings","assign","err","message","variant","anchorOrigin","vertical","horizontal","updateNaming","id","loc","deleteNaming","parameters","filter"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useSnackbar } from \"notistack\";\nimport NamingTable from \"../components/Naming/NamingTable\";\nvar moment = require(\"moment\");\n\nconst Naming = () => {\n  const [namings, setNamings] = useState({});\n  const { enqueueSnackbar } = useSnackbar();\n\n  useEffect(() => {\n    const getNamings = async () => {\n      const namingsFromServer = await fetchNamings();\n      setNamings(namingsFromServer);\n    };\n    getNamings();\n  }, []);\n\n  // Fetch Namings\n  const fetchNamings = async () => {\n    const res = await fetch(\"http://localhost:3001/api/v1/namings\");\n    const data = await res.json();\n    let columns = [];\n    let rows = data.namings.rows.map(row => {\n      row.createdAt = moment(row.createdAt).format(\"YYYY.MM.DD HH:mm\");\n      row.updatedAt = moment(row.updatedAt).format(\"YYYY.MM.DD HH:mm\");\n      if (row.type) row.type = row.type.name;\n      return row;\n    });\n    let locColumns = [];\n    if (data.namings.count > 0) locColumns = Object.keys(data.namings.rows[0]);\n\n    locColumns.forEach(item => {\n      let obj = {};\n      switch (item) {\n        case \"id\":\n          obj.headerName = \"ID\";\n          obj.field = item;\n          break;\n        case \"name\":\n          obj.headerName = \"Название\";\n          obj.field = item;\n          obj.flex = 0.4;\n          break;\n        case \"type\":\n          obj.headerName = \"Тип\";\n          obj.field = item;\n          obj.flex = 0.4;\n          break;\n        case \"createdAt\":\n          obj.headerName = \"Дата создания\";\n          obj.field = item;\n          obj.flex = 0.2;\n          break;\n        case \"updatedAt\":\n          obj.headerName = \"Дата редактирования\";\n          obj.field = item;\n          obj.flex = 0.2;\n          break;\n        case \"note\":\n          obj.headerName = \"Примечание\";\n          obj.field = item;\n          obj.flex = 0.4;\n          break;\n        default:\n          break;\n      }\n      if (data.namings.count > 0 && item !== \"deletedAt\" && item !== \"typeId\") {\n        columns.push(obj);\n      }\n    });\n\n    let namings = {};\n\n    // move the type in 3 column left\n    columns.forEach((col, index) => {\n      if (col.headerName === \"Тип\") {\n        columns.splice(index, 1);\n        columns.splice(index - 3, 0, col);\n      }\n    });\n\n    namings.rows = rows;\n    namings.columns = columns;\n    return namings;\n  };\n\n  // Add Naming\n  const addNaming = async naming => {\n    try {\n      const res = await fetch(\"http://localhost:3001/api/v1/namings/\", {\n        method: \"POST\",\n        body: JSON.stringify(naming),\n        headers: {\n          \"Content-type\": \"application/json\"\n        }\n      });\n\n      const data = await res.json();\n      console.log({ data });\n      if (data[\"Bad Request\"]) throw new Error(data[\"Bad Request\"]);\n      if (data[\"errorMessage\"]) throw new Error(data[\"errorMessage\"]);\n      let newRows = [];\n      data.naming[0].type = data.naming[0].type.name;\n      console.log(\"data.naming[0] \", data.naming[0]);\n      if (namings.columns.length > 0) {\n        data.naming[0].createdAt = moment(data.naming.createdAt).format(\n          \"YYYY.MM.DD HH:mm\"\n        );\n        data.naming[0].updatedAt = moment(data.naming.updatedAt).format(\n          \"YYYY.MM.DD HH:mm\"\n        );\n        newRows = [...namings.rows, data.naming[0]];\n        let newNamings = Object.assign(\n          {},\n          { columns: namings.columns, rows: newRows }\n        );\n        setNamings(newNamings);\n      } else {\n        const namingsFromServer = await fetchNamings();\n        setNamings(namingsFromServer);\n      }\n    } catch (err) {\n      console.log(err);\n      enqueueSnackbar(`${err.message}`, {\n        variant: \"error\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    }\n  };\n\n  // Add Naming\n  const updateNaming = async naming => {\n    console.log(\"naming = \", naming);\n    try {\n      const res = await fetch(\n        `http://localhost:3001/api/v1/namings/${naming.id}`,\n        {\n          method: \"PUT\",\n          headers: {\n            \"Content-type\": \"application/json\"\n          },\n          body: JSON.stringify(naming)\n        }\n      );\n\n      const data = await res.json();\n      if (data[\"Bad Request\"]) throw new Error(data[\"Bad Request\"]);\n      if (data[\"errorMessage\"]) throw new Error(data[\"errorMessage\"]);\n      data.naming.createdAt = moment(data.naming.createdAt).format(\n        \"YYYY.MM.DD HH:mm\"\n      );\n      data.naming.updatedAt = moment(data.naming.updatedAt).format(\n        \"YYYY.MM.DD HH:mm\"\n      );\n      let newRows = [];\n      if (namings.columns.length > 0) {\n        newRows = namings.rows.map(loc =>\n          loc.id === naming.id ? data.naming : loc\n        );\n        let newNamings = Object.assign(\n          {},\n          { columns: namings.columns, rows: newRows }\n        );\n        setNamings(newNamings);\n      } else {\n        const namingsFromServer = await fetchNamings();\n        setNamings(namingsFromServer);\n      }\n    } catch (err) {\n      console.log(err);\n      enqueueSnackbar(`${err.message}`, {\n        variant: \"error\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    }\n  };\n\n  // Delete Naming\n  const deleteNaming = async parameters => {\n    try {\n      await fetch(`http://localhost:3001/api/v1/namings/${parameters.id}`, {\n        method: \"DELETE\"\n      });\n\n      let newRows = namings.rows.filter(row => row.id !== parameters.id);\n      let newNamings = Object.assign(\n        {},\n        { columns: namings.columns, rows: newRows }\n      );\n      setNamings(newNamings);\n    } catch (err) {\n      console.log(err);\n      enqueueSnackbar(`${err.message}`, {\n        variant: \"error\",\n        anchorOrigin: {\n          vertical: \"top\",\n          horizontal: \"center\"\n        }\n      });\n    }\n  };\n\n  return (\n    <NamingTable\n      namings={namings}\n      deleteNaming={deleteNaming}\n      addNaming={addNaming}\n      updateNaming={updateNaming}\n    ></NamingTable>\n  );\n};\n\nexport default Naming;\n"]},"metadata":{},"sourceType":"module"}